{"version":3,"sources":["index.coffee"],"names":[],"mappings":"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","file":"index.js","sourceRoot":"/source/","sourcesContent":["require(\"source-map-support\").install()\r\nirc = require \"irc\"\r\nrequest = require \"request\"\r\nfuzzaldrin = require \"fuzzaldrin\"\r\n\r\nserverList = []\r\n\r\nupdateServerList = ->\r\n    request \"http://uk.cube2.org/serverlist\", (error, response, body) ->\r\n        if !error && response.statusCode == 200 then serverList = JSON.parse(body)\r\n\r\nupdateServerList()\r\nsetInterval updateServerList, 30000\r\n\r\nfindServer = (query) ->\r\n    candidates = fuzzaldrin.filter serverList, query, {key: 'description', maxResults: 5}\r\n    if 0 < candidates.length < 5\r\n        \"#{candidates[0].description}: /connect #{candidates[0].host} #{candidates[0].port}\"\r\n    else\r\n        query\r\n\r\nresponse = (sender, type = \"games\", server) ->\r\n    \"#{sender} is looking for #{type}#{if server then ' on '+server else '.'}\"\r\n\r\nname = \"botter\"\r\nprefix = \".\"\r\nchannels = [\"#botter_test\"]\r\ncommands =\r\n    mix: (sender, args) ->\r\n        [response(sender, \"mixed games\", findServer args.join \" \"), true]\r\n    cw: (sender, args) ->\r\n        players = \"\"\r\n        unless isNaN (num = parseInt args[0])\r\n            players = \"#{num}v#{num} \"\r\n            args = args.slice 1\r\n        [response(sender, \"a #{players}clanwar\", findServer args.join \" \"), true]\r\n    duel: (sender, args) ->\r\n        mode = \"a \"\r\n        if args[0] in [\"insta\", \"effic\", \"ffa\"]\r\n            mode = \"#{if args[0][0] == 'f' then 'a' else 'an'} #{args[0]} \"\r\n            args = args.slice 1\r\n        [response(sender, \"#{mode}duel\", findServer args.join \" \"), true]\r\n    help: ->\r\n        [\"Commands: #{prefix}mix [server...], #{prefix}cw [number] [server...], #{prefix}duel [insta|effic|ffa] [server...], #{prefix}help, #{prefix}about\", false]\r\n    about: ->\r\n        [\"botter; a bottie replacement. https://github.com/AngrySnout/botter\", false]\r\n\r\nclient = new irc.Client \"burstfire.uk.eu.gamesurge.net\", name,\r\n    userName: name\r\n    realName: name\r\n    channels: channels\r\n    autoRejoin: true\r\n    floodProtection: true\r\n\r\nsplitArgs = (text) ->\r\n    text.replace(/[\\n\\r]/g, \"\").split(\" \")\r\n\r\nclient.addListener 'message', (from, to, message) ->\r\n    args = splitArgs message\r\n    if args[0][0] == prefix\r\n        command = args[0].slice 1\r\n        if commands[command]\r\n            [res, announce] = commands[command](from, args.slice 1)\r\n            if announce\r\n                client.say chan, res for chan in channels\r\n            else\r\n                client.send \"notice\", from, res\r\n\r\nclient.addListener \"error\", (message) ->\r\n    console.log \"error: \", message\r\n"]}